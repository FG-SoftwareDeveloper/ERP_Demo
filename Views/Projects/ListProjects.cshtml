@{
    Layout = "_Layout";
    // Example data for static design; replace with your model in production
    var projects = new[] {
        new { ProjectID = 1, Name = "HQ Expansion", Status = "Active", Budget = 2500000m, Spent = 1800000m, Forecast = 2600000m, Profit = 400000m, LastUpdate = DateTime.Parse("2025-08-28"), AIInsights = "On track. Forecast within 5% of budget." },
        new { ProjectID = 2, Name = "Bridge Build", Status = "Delayed", Budget = 3200000m, Spent = 2900000m, Forecast = 3500000m, Profit = 200000m, LastUpdate = DateTime.Parse("2025-08-25"), AIInsights = "Delay due to material shortage. Over budget risk." },
        new { ProjectID = 3, Name = "Warehouse Retrofit", Status = "Completed", Budget = 1200000m, Spent = 1150000m, Forecast = 1200000m, Profit = 150000m, LastUpdate = DateTime.Parse("2025-08-20"), AIInsights = "Completed under budget. Profit margin above target." }
    };
}

<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card glass-effect border-0">
                <div class="card-body p-4 d-flex flex-column flex-md-row align-items-md-start justify-content-between">
                    <div>
                        <h1 class="mb-1 text-themed-primary d-flex align-items-center"><i class="bi bi-kanban me-3 icon-primary fs-2"></i> Projects</h1>
                        <p class="text-themed-secondary mb-0">Visual pipeline with AI coach and capacity insights.</p>
                    </div>
                    <div class="mt-3 mt-md-0 d-flex gap-2">
                        <button class="btn btn-themed"><i class="bi bi-plus-circle me-2"></i>New Project</button>
                        <button class="btn btn-outline-secondary" data-bs-toggle="offcanvas" data-bs-target="#coachPanel"><i class="bi bi-robot me-2"></i>AI Coach</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signature: Kanban -->
    <div class="row g-4">
        <div class="col-xl-3">
            <div class="card glass-effect border-0">
                <div class="card-header bg-transparent border-0 p-3"><strong>Planned</strong></div>
                <div class="card-body p-3">
                    <div class="card hover-3d border-0 mb-2"><div class="card-body p-3"><strong>Warehouse Expansion</strong><div class="small text-themed-secondary">Manager: S. Lee</div></div></div>
                    <div class="card hover-3d border-0 mb-2"><div class="card-body p-3"><strong>Data Center Upgrade</strong><div class="small text-themed-secondary">Manager: T. Khan</div></div></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3">
            <div class="card glass-effect border-0">
                <div class="card-header bg-transparent border-0 p-3"><strong>In Progress</strong></div>
                <div class="card-body p-3">
                    <div class="card hover-3d border-0 mb-2"><div class="card-body p-3"><strong>Retail Fit-out</strong><div class="small">CPI 1.02 • SPI 0.95</div></div></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3">
            <div class="card glass-effect border-0">
                <div class="card-header bg-transparent border-0 p-3"><strong>Blocked</strong></div>
                <div class="card-body p-3">
                    <div class="card hover-3d border-0 mb-2"><div class="card-body p-3"><strong>Bridge Rehab</strong><div class="small text-danger">Permits pending</div></div></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3">
            <div class="card glass-effect border-0">
                <div class="card-header bg-transparent border-0 p-3"><strong>Completed</strong></div>
                <div class="card-body p-3">
                    <div class="card hover-3d border-0 mb-2"><div class="card-body p-3"><strong>Office Refresh</strong><div class="small text-success">Closed on time</div></div></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Capacity chart -->
    <div class="row g-4 mt-4">
        <div class="col-12">
            <div class="card glass-effect border-0">
                <div class="card-header bg-transparent border-0 p-4"><h5 class="mb-0 text-themed-primary"><i class="bi bi-people me-2 icon-info"></i>Capacity Utilization</h5></div>
                <div class="card-body p-4"><div class="chart-container"><canvas id="capacityUtil"></canvas></div></div>
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas: AI Coach -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="coachPanel">
    <div class="offcanvas-header"><h5 class="offcanvas-title"><i class="bi bi-robot me-2"></i>Project Coach</h5><button class="btn-close" data-bs-dismiss="offcanvas"></button></div>
    <div class="offcanvas-body">
        <div class="alert alert-info"><i class="bi bi-lightbulb me-2"></i>Retail Fit-out: recover schedule by adding weekend shift for 2 weeks (+$7.2k, net +0.08 SPI).</div>
        <button class="btn btn-themed w-100"><i class="bi bi-clipboard2-check me-2"></i>Create Action Plan</button>
    </div>
</div>
